<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Javascript tests</title>
    <link rel="stylesheet" href="/static/tests/qunit.css">
</head>
<body>
<div id="qunit"></div>
<div id="qunit-fixture">
    <a id="id_login">Sign in</a>
</div>
<script src="http://code.jquery.com/jquery.min.js"></script>
<script src="/static/tests/qunit.js"></script>
<script src="/static/accounts/accounts.js"></script>
<script>
    test("initialize binds sign in button to navigator.id.request", function () {
        var requestWasCalled = false;
        var mockRequestFunction = function () {
            requestWasCalled = true;
        };
        var mockNavigator = {
            id: {
                request: mockRequestFunction
            }
        };
        Superlists.Accounts.initialize(mockNavigator);
        equal(requestWasCalled, false, 'check request not called before click');

        $("#id_login").trigger('click');
        equal(requestWasCalled, true);
    });
    test("errors should not be hidden unless on keypress", function () {
        equal($('.has-error').is(':visible'), true)
    });
</script>
</body>
</html>